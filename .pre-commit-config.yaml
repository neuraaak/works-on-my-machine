# ///////////////////////////////////////////////////////////////
# üîß PRE-COMMIT CONFIGURATION
# ///////////////////////////////////////////////////////////////
# Installation: pip install pre-commit && pre-commit install
# Run manually: pre-commit run --all-files
#
# This configuration runs automatically on `git commit` and ensures:
# - Code formatting consistency (Black, isort, Ruff)
# - Import organization (isort)
# - Code quality and linting (Ruff)
# - General file hygiene (trailing whitespace, YAML/TOML validation, etc.)
# - Security scanning (Bandit)
#
# Note: The .hooks/pre-commit script executes .scripts/dev/lint.py
# which runs these tools in a specific order:
#   1. Ruff Format (üé®) - Format code
#   2. Black (‚ö´)        - Format code
#   3. isort (üì¶)        - Sort imports
#   4. Ruff Check (üîç)   - Lint code

repos:
  # ///////////////////////////////////////////////////////////////
  # üßπ FILE HYGIENE CHECKS
  # General pre-commit hooks for file validation and cleanup
  # ///////////////////////////////////////////////////////////////
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      # Remove trailing whitespace
      - id: trailing-whitespace
        exclude: '\.md$'
      # Fix end-of-file markers
      - id: end-of-file-fixer
      # Validate YAML syntax
      - id: check-yaml
      # Validate TOML syntax
      - id: check-toml
      # Detect merge conflict markers
      - id: check-merge-conflict
      # Prevent large files from being committed
      - id: check-added-large-files
        args: ["--maxkb=1000"]
      # Detect debug statements (debugger calls)
      - id: debug-statements
      # Check for case conflicts in filenames
      - id: check-case-conflict
      # Check docstring is first in module
      - id: check-docstring-first
      # Validate JSON syntax
      - id: check-json
      # Check for broken symlinks
      - id: check-symlinks
      # Detect private keys
      - id: detect-private-key
      # Ensure test files follow naming convention
      - id: name-tests-test
      # Sort requirements.txt files
      - id: requirements-txt-fixer

  # ///////////////////////////////////////////////////////////////
  # üé® CODE FORMATTING & LINTING TOOLS
  # Auto-formatting, import sorting, and style checking
  # ===
  # Execution order matters - formatted first, then linted:
  # 1. Ruff Format (must run before Black/isort for consistency)
  # 2. Black (88 char line length, Python 3.10+)
  # 3. isort (Black-compatible profile, 88 char line length)
  # 4. Ruff Check (comprehensive linting with auto-fix)
  # ///////////////////////////////////////////////////////////////

  # Ruff: All-in-one linter with comprehensive rule sets (format)
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.4.4
    hooks:
      - id: ruff-format
        name: "Ruff Format"
        args: [--line-length=88]

  # Black: Code formatter (88 char line length, Python 3.10+)
  - repo: https://github.com/psf/black
    rev: 24.8.0
    hooks:
      - id: black
        name: "Black Formatter"
        language_version: python3
        args: [--line-length=88, --target-version=py310]

  # isort: Import sorting (Black-compatible profile)
  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort
        name: "isort - Sort Imports"
        args: [--profile=black, --line-length=88]

  # Ruff: All-in-one linter with comprehensive rule sets (check)
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.4.4
    hooks:
      - id: ruff
        name: "Ruff Check"
        args: [check, --fix, --line-length=88, --exit-non-zero-on-fix]

  # ///////////////////////////////////////////////////////////////
  # üîê SECURITY TOOLS
  # Code security scanning and vulnerability detection
  # ///////////////////////////////////////////////////////////////

  # Bandit: Security linter for identifying common security issues
  - repo: https://github.com/PyCQA/bandit
    rev: 1.7.10
    hooks:
      - id: bandit
        name: "Bandit - Security Check"
        args: [-r, ., -f, json]
        exclude: "tests/.*|examples/.*|docs/.*"

  # ///////////////////////////////////////////////////////////////
  # ‚úÖ TYPE CHECKING TOOLS (OPTIONAL)
  # Static type analysis with detailed reporting (disabled by default)
  # Uncomment to enable: can be slow on large codebases
  # ///////////////////////////////////////////////////////////////

  # Mypy: Comprehensive type checking with detailed reporting
  # - repo: https://github.com/pre-commit/mirrors-mypy
  #   rev: v1.12.0
  #   hooks:
  #     - id: mypy
  #       name: "Mypy - Type Checking"
  #       additional_dependencies: [types-all]
  #       args: [--ignore-missing-imports]

  # ///////////////////////////////////////////////////////////////
  # üß™ TESTING TOOLS (OPTIONAL)
  # Test execution with coverage (disabled by default)
  # Uncomment to enable: can be heavy on commit
  # ///////////////////////////////////////////////////////////////

  # Pytest: Test runner with unit tests
  # - repo: local
  #   hooks:
  #     - id: pytest-unit
  #       name: "Pytest - Unit Tests"
  #       entry: python -m pytest tests/unit --tb=short
  #       language: system
  #       pass_filenames: false
  #       always_run: true
